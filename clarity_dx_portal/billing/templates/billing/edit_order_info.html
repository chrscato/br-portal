{% extends 'billing/base.html' %}

{% block title %}Edit Order Info - Bill {{ bill.id }} - Clarity Dx Bill Review Portal{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2><i class="fas fa-clipboard-edit"></i> Edit Order Information</h2>
                <p class="text-muted">Edit order details for Bill {{ bill.id }}</p>
            </div>
            <div>
                <a href="{% url 'billing:bill_detail' bill.id %}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Bill Detail
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Order Information</h5>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="order_id" class="form-label">Order ID</label>
                                <input type="text" class="form-control" id="order_id" name="order_id" 
                                       value="{{ order.order_id }}" readonly>
                                <small class="form-text text-muted">Order ID cannot be changed</small>
                            </div>
                            
                            <div class="mb-3">
                                <label for="filemaker_record_number" class="form-label">FileMaker Record Number</label>
                                <input type="text" class="form-control" id="filemaker_record_number" name="filemaker_record_number" 
                                       value="{{ order.filemaker_record_number|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_first_name" class="form-label">Patient First Name</label>
                                <input type="text" class="form-control" id="patient_first_name" name="patient_first_name" 
                                       value="{{ order.patient_first_name|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_last_name" class="form-label">Patient Last Name</label>
                                <input type="text" class="form-control" id="patient_last_name" name="patient_last_name" 
                                       value="{{ order.patient_last_name|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_name" class="form-label">Patient Name</label>
                                <input type="text" class="form-control" id="patient_name" name="patient_name" 
                                       value="{{ order.patient_name|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_dob" class="form-label">Patient DOB</label>
                                <input type="text" class="form-control" id="patient_dob" name="patient_dob" 
                                       value="{{ order.patient_dob|default:'' }}" placeholder="MM/DD/YYYY">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_phone" class="form-label">Patient Phone</label>
                                <input type="text" class="form-control" id="patient_phone" name="patient_phone" 
                                       value="{{ order.patient_phone|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_address" class="form-label">Patient Address</label>
                                <input type="text" class="form-control" id="patient_address" name="patient_address" 
                                       value="{{ order.patient_address|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_city" class="form-label">Patient City</label>
                                <input type="text" class="form-control" id="patient_city" name="patient_city" 
                                       value="{{ order.patient_city|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_state" class="form-label">Patient State</label>
                                <input type="text" class="form-control" id="patient_state" name="patient_state" 
                                       value="{{ order.patient_state|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_zip" class="form-label">Patient ZIP</label>
                                <input type="text" class="form-control" id="patient_zip" name="patient_zip" 
                                       value="{{ order.patient_zip|default:'' }}">
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="patient_injury_date" class="form-label">Patient Injury Date</label>
                                <input type="text" class="form-control" id="patient_injury_date" name="patient_injury_date" 
                                       value="{{ order.patient_injury_date|default:'' }}" placeholder="MM/DD/YYYY">
                            </div>
                            
                            <div class="mb-3">
                                <label for="patient_injury_description" class="form-label">Patient Injury Description</label>
                                <textarea class="form-control" id="patient_injury_description" name="patient_injury_description" 
                                          rows="3">{{ order.patient_injury_description|default:'' }}</textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label for="referring_physician" class="form-label">Referring Physician</label>
                                <input type="text" class="form-control" id="referring_physician" name="referring_physician" 
                                       value="{{ order.referring_physician|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="referring_physician_npi" class="form-label">Referring Physician NPI</label>
                                <input type="text" class="form-control" id="referring_physician_npi" name="referring_physician_npi" 
                                       value="{{ order.referring_physician_npi|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="assigning_company" class="form-label">Assigning Company</label>
                                <input type="text" class="form-control" id="assigning_company" name="assigning_company" 
                                       value="{{ order.assigning_company|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="assigning_adjuster" class="form-label">Assigning Adjuster</label>
                                <input type="text" class="form-control" id="assigning_adjuster" name="assigning_adjuster" 
                                       value="{{ order.assigning_adjuster|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="claim_number" class="form-label">Claim Number</label>
                                <input type="text" class="form-control" id="claim_number" name="claim_number" 
                                       value="{{ order.claim_number|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="order_type" class="form-label">Order Type</label>
                                <input type="text" class="form-control" id="order_type" name="order_type" 
                                       value="{{ order.order_type|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="jurisdiction_state" class="form-label">Jurisdiction State</label>
                                <input type="text" class="form-control" id="jurisdiction_state" name="jurisdiction_state" 
                                       value="{{ order.jurisdiction_state|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="bundle_type" class="form-label">Bundle Type</label>
                                <input type="text" class="form-control" id="bundle_type" name="bundle_type" 
                                       value="{{ order.bundle_type|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="provider_id" class="form-label">Provider ID</label>
                                <input type="text" class="form-control" id="provider_id" name="provider_id" 
                                       value="{{ order.provider_id|default:'' }}">
                            </div>
                            
                            <div class="mb-3">
                                <label for="fully_paid" class="form-label">Fully Paid</label>
                                <select class="form-select" id="fully_paid" name="fully_paid">
                                    <option value="Y" {% if order.fully_paid == 'Y' %}selected{% endif %}>Yes</option>
                                    <option value="N" {% if order.fully_paid == 'N' %}selected{% endif %}>No</option>
                                    <option value="" {% if not order.fully_paid %}selected{% endif %}>Not Set</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                        <a href="{% url 'billing:bill_detail' bill.id %}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
